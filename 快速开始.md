# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“¦ å®‰è£…æ­¥éª¤

### 1. æ¿€æ´»Pythonç¯å¢ƒ
```bash
conda activate py311
```

### 2. å®‰è£…ä¾èµ–
```bash
cd D:\aproduct\fastapi-user\fastapi-user-main
pip install -r requirements.txt
```

é¢„æœŸå®‰è£…çš„åŒ…ï¼š
- âœ… fastapi==0.109.0
- âœ… uvicorn[standard]==0.27.0
- âœ… pydantic[email]==2.5.3
- âœ… requests==2.31.0
- âœ… sqlalchemy==2.0.30

## ğŸš€ é¦–æ¬¡è¿è¡Œ

### æ–¹å¼1ï¼šå¿«é€Ÿå¼€å§‹ï¼ˆè‡ªåŠ¨åˆ›å»ºç©ºæ•°æ®åº“ï¼‰

```bash
cd D:\aproduct\fastapi-user\fastapi-user-main
python main.py
```

åº”ç”¨ä¼šè‡ªåŠ¨ï¼š
1. åˆ›å»º `users.db` æ•°æ®åº“æ–‡ä»¶
2. åˆ›å»º `users` è¡¨
3. å¯åŠ¨APIæœåŠ¡

### æ–¹å¼2ï¼šä½¿ç”¨æµ‹è¯•æ•°æ®

```bash
# 1. åˆå§‹åŒ–æ•°æ®åº“å¹¶æ’å…¥æµ‹è¯•æ•°æ®
cd D:\aproduct\fastapi-user
python init_db.py

# 2. å¯åŠ¨åº”ç”¨
cd fastapi-user-main
python main.py
```

## ğŸ“ è®¿é—®APIæ–‡æ¡£

å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨è®¿é—®ï¼š

**Swagger UIï¼ˆæ¨èï¼‰ï¼š**
```
http://127.0.0.1:8000/docs
```

åœ¨è¿™é‡Œä½ å¯ä»¥ï¼š
- ğŸ“– æŸ¥çœ‹æ‰€æœ‰APIæ¥å£
- ğŸ§ª ç›´æ¥æµ‹è¯•æ¥å£
- ğŸ“‹ æŸ¥çœ‹è¯·æ±‚/å“åº”ç¤ºä¾‹

**ReDocï¼š**
```
http://127.0.0.1:8000/redoc
```

## ğŸ§ª è¿è¡Œæµ‹è¯•

åœ¨**æ–°çš„ç»ˆç«¯çª—å£**ä¸­è¿è¡Œï¼š

```bash
cd D:\aproduct\fastapi-user
python test_api.py
```

æµ‹è¯•è„šæœ¬ä¼šï¼š
- âœ… æµ‹è¯•æ‰€æœ‰CRUDæ“ä½œ
- âœ… éªŒè¯æ•°æ®éªŒè¯é€»è¾‘
- âœ… æ£€æŸ¥é”™è¯¯å¤„ç†
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„æµ‹è¯•ç»“æœ

## ğŸ’¡ å¿«é€Ÿæµ‹è¯•ï¼ˆå¤åˆ¶å³ç”¨ï¼‰

### åˆ›å»ºç”¨æˆ·
```bash
# PowerShell
Invoke-RestMethod -Uri "http://127.0.0.1:8000/users/" -Method Post -ContentType "application/json" -Body '{"name":"å¼ ä¸‰","email":"zhangsan@example.com","age":25}'
```

### è·å–æ‰€æœ‰ç”¨æˆ·
```bash
# PowerShell
Invoke-RestMethod -Uri "http://127.0.0.1:8000/users/"
```

### è·å–ç”¨æˆ·ç»Ÿè®¡
```bash
# PowerShell
Invoke-RestMethod -Uri "http://127.0.0.1:8000/stats/count"
```

## ğŸ”§ å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³

### é—®é¢˜1ï¼šæ‰¾ä¸åˆ°æ¨¡å—
```
ModuleNotFoundError: No module named 'fastapi'
```

**è§£å†³ï¼š**
```bash
pip install -r requirements.txt
```

### é—®é¢˜2ï¼šç«¯å£è¢«å ç”¨
```
ERROR: [Errno 10048] error while attempting to bind on address
```

**è§£å†³æ–¹å¼1ï¼š** ä¿®æ”¹ç«¯å£

ç¼–è¾‘ `main.py`ï¼Œæœ€åä¸€è¡Œæ”¹ä¸ºï¼š
```python
uvicorn.run(app, host="127.0.0.1", port=8001, reload=True)
```

**è§£å†³æ–¹å¼2ï¼š** å…³é—­å ç”¨è¿›ç¨‹
```bash
# WindowsæŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8000

# ç»“æŸè¿›ç¨‹ï¼ˆæ›¿æ¢<PID>ä¸ºä¸Šé¢æŸ¥åˆ°çš„è¿›ç¨‹IDï¼‰
taskkill /PID <PID> /F
```

### é—®é¢˜3ï¼šæ•°æ®åº“æ–‡ä»¶è¢«é”å®š
```
sqlite3.OperationalError: database is locked
```

**è§£å†³ï¼š** å…³é—­æ‰€æœ‰æ­£åœ¨è®¿é—®æ•°æ®åº“çš„ç¨‹åºï¼ˆåŒ…æ‹¬SQLiteæŸ¥çœ‹å™¨ï¼‰

### é—®é¢˜4ï¼šå¦‚ä½•é‡ç½®æ•°æ®åº“ï¼Ÿ

```bash
# åœæ­¢åº”ç”¨ï¼ˆCtrl+Cï¼‰
# åˆ é™¤æ•°æ®åº“æ–‡ä»¶
cd D:\aproduct\fastapi-user
del users.db

# é‡æ–°åˆå§‹åŒ–
python init_db.py

# é‡å¯åº”ç”¨
cd fastapi-user-main
python main.py
```

## ğŸ“Š é¡¹ç›®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶/ç›®å½• | è¯´æ˜ | å¯ä»¥åˆ é™¤ï¼Ÿ |
|-----------|------|-----------|
| `users.db` | SQLiteæ•°æ®åº“æ–‡ä»¶ | âœ… å¯åˆ é™¤ï¼ˆä¼šè‡ªåŠ¨é‡å»ºï¼‰ |
| `db/` | æ•°æ®åº“æ¨¡å— | âŒ å¿…éœ€ |
| `fastapi-user-main/main.py` | ä¸»ç¨‹åº | âŒ å¿…éœ€ |
| `init_db.py` | åˆå§‹åŒ–è„šæœ¬ | âœ… å¯é€‰ |
| `test_api.py` | æµ‹è¯•è„šæœ¬ | âœ… å¯é€‰ |
| `README.md` | è¯¦ç»†æ–‡æ¡£ | âœ… å¯é€‰ |

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **å­¦ä¹ APIæ–‡æ¡£ï¼š** è®¿é—® http://127.0.0.1:8000/docs
2. **è¿è¡Œæµ‹è¯•ï¼š** `python test_api.py`
3. **æŸ¥çœ‹æ•°æ®åº“ï¼š** ä½¿ç”¨ DB Browser for SQLite æ‰“å¼€ `users.db`
4. **é˜…è¯»è¯¦ç»†æ–‡æ¡£ï¼š** æŸ¥çœ‹ `README.md`

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

- ğŸ“– æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š`README.md`
- ğŸŒ FastAPIå®˜æ–¹æ–‡æ¡£ï¼šhttps://fastapi.tiangolo.com/zh/
- ğŸ“Š SQLAlchemyæ–‡æ¡£ï¼šhttps://docs.sqlalchemy.org/

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

